local fbiAuto = {}

fbiAuto[1] = createVehicle(497, 1324.5458984375, -1374.0048828125, 23.14056968689, 0.263671875, 359.70336914063, 359.02770996094) -- Police Maverick
fbiAuto[2] = createVehicle(487, 1306.126953125, -1373.927734375, 23.137113571167, 0.263671875, 359.73083496094, 0.615234375) -- Maverick
fbiAuto[3] = createVehicle(609, 1304.9169921875, -1360.69921875, 13.565889358521, 359.40124511719, 2.7740478515625, 91.878662109375) -- Boxville Mission
fbiAuto[4] = createVehicle(599, 1329.34765625, -1361.44921875, 13.708506584167, 1.065673828125, 3.526611328125, 87.374267578125) -- Police Ranger
fbiAuto[5] = createVehicle(599, 1321.23046875, -1361.4716796875, 13.751889228821, 0.966796875, 2.3016357421875, 90.411987304688) -- Police Ranger
fbiAuto[6] = createVehicle(601, 1323.8857421875, -1325.0986328125, 13.198058128357, 0.3680419921875, 359.98901367188, 357.4072265625) -- S.W.A.T.
fbiAuto[7] = createVehicle(528, 1328.73828125, -1311.4453125, 13.498024940491, 0.296630859375, 0, 271.318359375) -- FBI Truck
fbiAuto[8] = createVehicle(528, 1314.9228515625, -1311.5498046875, 13.49010181427, 0.3240966796875, 359.97802734375, 272.5048828125) -- FBI Truck
fbiAuto[9] = createVehicle(528, 1305.6474609375, -1311.955078125, 13.486320495605, 0.274658203125, 0, 272.5048828125) -- FBI Truck
fbiAuto[10] = createVehicle(415, 1283.9443359375, -1305.689453125, 13.227884292603, 0.340576171875, 5.1800537109375, 179.59899902344) -- Cheetah
fbiAuto[11] = createVehicle(415, 1276.6572265625, -1295.388671875, 13.139388084412, 358.89587402344, 357.42919921875, 215.95275878906) -- Cheetah
fbiAuto[12] = createVehicle(415, 1275.296875, -1299.3291015625, 13.172439575195, 357.25341796875, 0.24169921875, 218.44665527344) -- Cheetah
fbiAuto[13] = createVehicle(415, 1274.0986328125, -1303.095703125, 13.213404655457, 358.87939453125, 357.07214355469, 224.19799804688) -- Cheetah
fbiAuto[14] = createVehicle(415, 1273.7158203125, -1306.8349609375, 13.214146614075, 358.86291503906, 357.03918457031, 223.35205078125) -- Cheetah
fbiAuto[15] = createVehicle(415, 1273.712890625, -1310.1728515625, 13.21616268158, 358.79699707031, 357.20397949219, 222.20397949219) -- Cheetah
fbiAuto[16] = createVehicle(415, 1273.4609375, -1312.7734375, 13.263793945313, 0.4119873046875, 359.91760253906, 223.42895507813) -- Cheetah
fbiAuto[17] = createVehicle(415, 1273.455078125, -1316.96875, 13.256287574768, 0.428466796875, 0.4888916015625, 228.42224121094) -- Cheetah
fbiAuto[18] = createVehicle(415, 1273.681640625, -1320.119140625, 13.225544929504, 358.73107910156, 357.25891113281, 222.29187011719) -- Cheetah
fbiAuto[19] = createVehicle(415, 1273.466796875, -1323.560546875, 13.262002944946, 0.362548828125, 0.06591796875, 225.76354980469) -- Cheetah
fbiAuto[20] = createVehicle(415, 1273.5537109375, -1327.2890625, 13.187304496765, 357.42370605469, 359.82421875, 258.62365722656) -- Cheetah
fbiAuto[21] = createVehicle(490, 1274.248046875, -1347.5400390625, 13.561706542969, 358.330078125, 359.92309570313, 313.51135253906) -- FBI Rancher
fbiAuto[22] = createVehicle(490, 1274.3212890625, -1353.6435546875, 13.562683105469, 358.17077636719, 359.96704101563, 314.560546875) -- FBI Rancher
fbiAuto[23] = createVehicle(490, 1274.048828125, -1357.9501953125, 13.572399139404, 359.50561523438, 3.372802734375, 316.95556640625) -- FBI Rancher
fbiAuto[24] = createVehicle(490, 1274.2998046875, -1362.650390625, 13.517852783203, 358.35205078125, 0.3131103515625, 311.95129394531) -- FBI Rancher
fbiAuto[25] = createVehicle(490, 1274.173828125, -1366.4697265625, 13.483580589294, 358.17626953125, 359.58251953125, 314.08264160156) -- FBI Rancher
fbiAuto[26] = createVehicle(490, 1274.291015625, -1370.2041015625, 13.475126266479, 358.34655761719, 359.85168457031, 312.099609375) -- FBI Rancher
fbiAuto[27] = createVehicle(490, 1274.2109375, -1374.65625, 13.451933860779, 358.36303710938, 0.889892578125, 311.75354003906) -- FBI Rancher
fbiAuto[28] = createVehicle(490, 1274.3134765625, -1378.24609375, 13.431925773621, 358.330078125, 0.5438232421875, 305.20568847656) -- FBI Rancher
fbiAuto[29] = createVehicle(490, 1274.396484375, -1381.5537109375, 13.41857624054, 358.42346191406, 0.076904296875, 300.88256835938) -- FBI Rancher
fbiAuto[30] = createVehicle(490, 1286.6328125, -1373.9306640625, 13.685126304626, 0.4449462890625, 359.81323242188, 353.91357421875) -- FBI Rancher
fbiAuto[31] = createVehicle(490, 1288.365234375, -1357.88671875, 13.65919303894, 359.43969726563, 2.1148681640625, 354.19921875) -- FBI Rancher
fbiAuto[32] = createVehicle(411, 1314.3388671875, -1319.376953125, 13.173332214355, 0, 0, 90.763549804688) -- Infernus
fbiAuto[33] = createVehicle(411, 1314.958984375, -1322.322265625, 13.17861366272, 0, 359.99450683594, 90.955810546875) -- Infernus
fbiAuto[34] = createVehicle(411, 1315.0419921875, -1324.724609375, 13.183917045593, 359.87365722656, 359.98901367188, 89.351806640625) -- Infernus
fbiAuto[35] = createVehicle(411, 1314.90625, -1327.423828125, 13.147759437561, 0, 0, 88.9013671875) -- Infernus
fbiAuto[36] = createVehicle(411, 1315.009765625, -1330.07421875, 13.157935142517, 359.99450683594, 359.99450683594, 89.324340820313) -- Infernus
fbiAuto[37] = createVehicle(427, 1281.5947265625, -1380.2421875, 13.45864200592, 0.142822265625, 358.60473632813, 355.7373046875) -- Enforcer
fbiAuto[38] = createVehicle(427, 1285.921875, -1380.3056640625, 13.680356025696, 0.054931640625, 359.87365722656, 1.0052490234375) -- Enforcer



function FBIFahrzeugEnter ( player, seat )

	local veh = source
	source = player
	if getPedOccupiedVehicleSeat ( source ) == 0 then
	if (getPlayerFraktion(source) == 4) or (getPlayerFraktion(source) == 7) then else
		outputChatBox("INFO: Du hast kein Schluessel fuer dieses Fahrzeug.", source, 200, 0, 0, false)
		o_removePedFromVehicle(source)
	end
	if(getElementModel(veh) == 601) then
		if(tonumber(getElementData(source, "swat")) == 0) or (tonumber(getElementData(source, "swat")) == nil) then o_removePedFromVehicle(source) outputChatBox("INFO: Du bist nicht im Swat-Modus!", source, 200, 0, 0, false) end
	end
	if(getElementModel(veh) == 528) then
		if(tonumber(getElementData(source, "swat")) == 0) or (tonumber(getElementData(source, "swat")) == nil) then o_removePedFromVehicle(source) outputChatBox("INFO: Du bist nicht im Swat-Modus!", source, 200, 0, 0, false) end
	end
	end
end

for v = 1, #fbiAuto, 1 do
	setVehicleColor(fbiAuto[v], 0, 0, math.random(20, 60), 0, 0, 0)
	setElementData(fbiAuto[v], "Typ", "Fraktionsauto")
	setElementData(fbiAuto[v], "Besitzer", "FBI")
	setVehicleEngineState(fbiAuto[v], false)
	toggleVehicleRespawn ( fbiAuto[v], true )
	setVehicleRespawnDelay ( fbiAuto[v], 5000 )
	setVehicleIdleRespawnDelay ( fbiAuto[v], FraktionsCarRespawn*1000*60 )
	addEventHandler ( "onVehicleEnter", fbiAuto[v], FBIFahrzeugEnter )
	if(getElementModel(fbiAuto[v]) == 598) then
		giveVehicleBetterEngine(fbiAuto[v])
	end
	if(getElementModel(fbiAuto[v]) == 599) then
		giveVehicleBetterEngine(fbiAuto[v])
	end
	if(getElementModel(fbiAuto[v]) == 411) then
		giveVehicleBetterEngine(fbiAuto[v])
	end
	if(getElementModel(fbiAuto[v]) == 427) then
		giveVehiclePanzerung(fbiAuto[v])
	end
	if(getElementModel(fbiAuto[v]) == 528) then
		local obj = createObject(3280, 0, 0, 0)
		attachElements(obj, fbiAuto[v], 0, -1.04, 1.04)
		setElementCollisionsEnabled(obj, false)
		setElementData(fbiAuto[v], "STEL", "0")
		giveVehiclePanzerung(fbiAuto[v])
	end
	
end

outputDebugString(#fbiAuto.." FBI-Fraktionsautos geladen.")

local Respawn = {}
local Respawntime = 10
addEvent("onFBICarRespawnAD", true)
addEventHandler("onFBICarRespawnAD", getRootElement(),
function()
	if(client ~= source) then return end
	for v = 1, #fbiAuto, 1 do
		respawnVehicle(fbiAuto[v])
	end
	outputChatBox(#fbiAuto.." RCPD-Autos wurden respawnt.", source, 0, 200, 0)
end)

addEvent("onFBICarRespawn", true)
addEventHandler("onFBICarRespawn", getRootElement(),
function()
	if(Respawn[source] == true) then outputChatBox("Du kannst nur jede "..Respawntime.." Minuten Respawnen!", source, 200, 0, 0, false) return end
	for v = 1, #fbiAuto, 1 do
		respawnVehicle(fbiAuto[v])
	end
	Respawn[source] = true
	local playa = source
	setTimer(function() Respawn[playa] = false end, Respawntime*60*1000, 1)
end)