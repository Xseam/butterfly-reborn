local rcpdCar = {}

rcpdCar[1] = createVehicle(598, 588.38671875, -590.5107421875, 17.871726989746, 359.6044921875, 359.99450683594, 269.07165527344) -- Police LV
rcpdCar[2] = createVehicle(598, 588.3154296875, -587.130859375, 17.873888015747, 359.60998535156, 0, 269.59899902344) -- Police LV
rcpdCar[3] = createVehicle(598, 587.873046875, -582.646484375, 17.987854003906, 355.46264648438, 1.4117431640625, 269.12658691406) -- Police LV
rcpdCar[4] = createVehicle(598, 588.0693359375, -578.8271484375, 18.000123977661, 355.06713867188, 0.10986328125, 274.48791503906) -- Police LV
rcpdCar[5] = createVehicle(598, 587.83203125, -574.986328125, 18.001983642578, 355.0341796875, 359.72534179688, 269.55505371094) -- Police LV
rcpdCar[6] = createVehicle(598, 587.8046875, -571.642578125, 17.993183135986, 355.39123535156, 359.81323242188, 270.21423339844) -- Police LV
rcpdCar[7] = createVehicle(598, 587.61328125, -568.6298828125, 17.989379882813, 355.35278320313, 359.80224609375, 269.65942382813) -- Police LV
rcpdCar[8] = createVehicle(598, 587.6142578125, -565.7939453125, 17.978322982788, 355.72082519531, 359.82421875, 270.32409667969) -- Police LV
rcpdCar[9] = createVehicle(598, 587.8818359375, -562.2041015625, 17.955669403076, 356.76452636719, 359.78576660156, 269.74731445313) -- Police LV
rcpdCar[10] = createVehicle(598, 587.9404296875, -555.8798828125, 17.932640075684, 357.19848632813, 358.67614746094, 246.08276367188) -- Police LV
rcpdCar[11] = createVehicle(598, 587.9072265625, -547.5478515625, 17.875864028931, 359.58251953125, 0, 219.78698730469) -- Police LV
rcpdCar[12] = createVehicle(601, 604.8681640625, -546.4599609375, 17.887758255005, 0.010986328125, 359.99450683594, 180.95031738281) -- S.W.A.T.
rcpdCar[13] = createVehicle(528, 599.1572265625, -546.025390625, 18.171573638916, 0.3131103515625, 359.99450683594, 179.13757324219) -- FBI Truck
rcpdCar[14] = createVehicle(528, 595.2548828125, -546.2294921875, 18.167350769043, 0.3240966796875, 0.0164794921875, 179.52758789063) -- FBI Truck
rcpdCar[15] = createVehicle(523, 605.4541015625, -565.1318359375, 17.698049545288, 359.63195800781, 0.010986328125, 100.47546386719) -- HPV1000
rcpdCar[16] = createVehicle(523, 605.2900390625, -567.1416015625, 17.697803497314, 359.72534179688, 359.99450683594, 102.53540039063) -- HPV1000
rcpdCar[17] = createVehicle(523, 605.3681640625, -568.90234375, 17.698053359985, 359.67590332031, 0.0494384765625, 107.578125) -- HPV1000
rcpdCar[18] = createVehicle(523, 605.2861328125, -570.63671875, 17.698059082031, 359.6484375, 0.054931640625, 101.96960449219) -- HPV1000
rcpdCar[19] = createVehicle(523, 605.1845703125, -572.5048828125, 17.698106765747, 359.64294433594, 0.0164794921875, 102.82653808594) -- HPV1000
rcpdCar[20] = createVehicle(523, 605.3017578125, -574.693359375, 17.6979637146, 359.63745117188, 0, 105.09521484375) -- HPV1000
rcpdCar[21] = createVehicle(523, 605.4599609375, -576.7578125, 17.69806098938, 359.64294433594, 0.0054931640625, 103.85925292969) -- HPV1000
rcpdCar[22] = createVehicle(523, 605.2685546875, -578.3740234375, 17.698534011841, 359.77478027344, 0.0054931640625, 97.00927734375) -- HPV1000
rcpdCar[23] = createVehicle(599, 616.3408203125, -609.375, 17.419931411743, 0.5108642578125, 359.99450683594, 359.41772460938) -- Police Ranger
rcpdCar[24] = createVehicle(599, 611.0234375, -609.619140625, 17.419389724731, 0.582275390625, 359.89013671875, 355.79772949219) -- Police Ranger
rcpdCar[25] = createVehicle(599, 610.0625, -599.3388671875, 17.422374725342, 0.560302734375, 359.92858886719, 359.09362792969) -- Police Ranger
rcpdCar[26] = createVehicle(599, 614.3134765625, -596.9404296875, 17.416709899902, 0.516357421875, 0.0054931640625, 273.05969238281) -- Police Ranger
rcpdCar[27] = createVehicle(599, 615.2958984375, -601.60546875, 17.416090011597, 0.516357421875, 359.98352050781, 270.02746582031) -- Police Ranger
rcpdCar[28] = createVehicle(497, 611.658203125, -566.2509765625, 26.320196151733, 0.263671875, 359.70336914063, 1.1370849609375) -- Police Maverick
rcpdCar[29] = createVehicle(497, 622.5185546875, -578.9951171875, 26.319686889648, 0.2691650390625, 359.86267089844, 271.27990722656) -- Police Maverick
rcpdCar[30] = createVehicle(525, 621.705078125, -605.9169921875, 17.005750656128, 355.4736328125, 359.89562988281, 268.74755859375) -- Towtruck
rcpdCar[31] = createVehicle(525, 630.345703125, -605.9697265625, 16.304460525513, 355.55053710938, 359.96704101563, 269.60998535156) -- Towtruck
rcpdCar[32] = createVehicle(525, 621.607421875, -610.7802734375, 17.004302978516, 355.50659179688, 0.0933837890625, 270.54931640625) -- Towtruck
rcpdCar[33] = createVehicle(525, 630.4052734375, -610.697265625, 16.301860809326, 355.65490722656, 0.0494384765625, 270.53833007813) -- Towtruck

function RCPDFahrzeugEnter ( player, seat )

	local veh = source
	source = player
	if getPedOccupiedVehicleSeat ( source ) == 0 then
	if (getPlayerFraktion(source) == 4) or (getPlayerFraktion(source) == 7) then else
		outputChatBox("INFO: Du hast kein Schluessel fuer dieses Fahrzeug.", source, 200, 0, 0, false)
		o_removePedFromVehicle(source)
	end
	if(getElementModel(veh) == 601) then
		if(tonumber(getElementData(source, "swat")) == 0) or (tonumber(getElementData(source, "swat")) == nil) then o_removePedFromVehicle(source) outputChatBox("INFO: Du bist nicht im Swat-Modus!", source, 200, 0, 0, false) end
	end
	if(getElementModel(veh) == 528) then
		if(tonumber(getElementData(source, "swat")) == 0) or (tonumber(getElementData(source, "swat")) == nil) then o_removePedFromVehicle(source) outputChatBox("INFO: Du bist nicht im Swat-Modus!", source, 200, 0, 0, false) end
	end
	end
end

for v = 1, #rcpdCar, 1 do
	setVehicleColor(rcpdCar[v], 0, 255, 0, 0, 0, 0)
	setElementData(rcpdCar[v], "Typ", "Fraktionsauto")
	setElementData(rcpdCar[v], "Besitzer", "RCPD")
	setVehicleEngineState(rcpdCar[v], false)
	toggleVehicleRespawn ( rcpdCar[v], true )
	setVehicleRespawnDelay ( rcpdCar[v], 5000 )
	setVehicleIdleRespawnDelay ( rcpdCar[v], FraktionsCarRespawn*1000*60 )
	addEventHandler ( "onVehicleEnter", rcpdCar[v], RCPDFahrzeugEnter )
	if(getElementModel(rcpdCar[v]) == 598) then
		setVehicleHandling(rcpdCar[v], "engineAcceleration", 20)
		setVehicleHandling(rcpdCar[v], "maxVelocity", 300)
	end
	if(getElementModel(rcpdCar[v]) == 599) then
		setVehicleHandling(rcpdCar[v], "engineAcceleration", 20)
		setVehicleHandling(rcpdCar[v], "maxVelocity", 300)
	end
	if(getElementModel(rcpdCar[v]) == 525) then
		local handling = getVehicleHandling ( rcpdCar[v] )
		setVehicleHandling(rcpdCar[v], "engineAcceleration", handling["engineAcceleration"]+4)
		setVehicleHandling(rcpdCar[v], "maxVelocity", handling["maxVelocity"]+100)
	end
	if(getElementModel(rcpdCar[v]) == 528) then
		local obj = createObject(3280, 0, 0, 0)
		attachElements(obj, rcpdCar[v], 0, -1.04, 1.04)
		setElementCollisionsEnabled(obj, false)
		setElementData(rcpdCar[v], "STEL", "0")
	end
	
end

outputDebugString(#rcpdCar.." RCPD-Fraktionsautos geladen.")

local Respawn = {}
local Respawntime = 10
addEvent("onrcpdCarRespawnAD", true)
addEventHandler("onrcpdCarRespawnAD", getRootElement(),
function()
	if(client ~= source) then return end
	for v = 1, #rcpdCar, 1 do
		respawnVehicle(rcpdCar[v])
	end
	outputChatBox(#rcpdCar.." RCPD-Autos wurden respawnt.", source, 0, 200, 0)
end)

addEvent("onrcpdCarRespawn", true)
addEventHandler("onrcpdCarRespawn", getRootElement(),
function()
	if(Respawn[source] == true) then outputChatBox("Du kannst nur jede "..Respawntime.." Minuten Respawnen!", source, 200, 0, 0, false) return end
	for v = 1, #rcpdCar, 1 do
		respawnVehicle(rcpdCar[v])
	end
	Respawn[source] = true
	local playa = source
	setTimer(function() Respawn[playa] = false end, Respawntime*60*1000, 1)
end)