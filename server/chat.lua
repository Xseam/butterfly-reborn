function chat_func ( message, messageType )	cancelEvent()	if(getElementData(source, "inLogin") == true) then return end	local name = getPlayerName ( source )		if messageType == 0 then		if(getElementData(source, "LIVEM") == true) then			outputChatBox("[Reporter "..getPlayerName(source)..": "..message.."]", getRootElement(), 255, 200, 0, false)		elseif(getElementData(source, "LIVE") == true) then			outputChatBox("[Gast "..getPlayerName(source)..": "..message.."]", getRootElement(), 255, 175, 0, false)		elseif(getElementData(source, "imGesprach") == true) then			local person = getElementData(source, "gespraecher")			if not(getPlayerName(person)) then outputChatBox("Gespraechsteilnehmer nicht gefunden! Bitte Reloggen!", source, 200, 0, 0, false) return end			outputChatBox(getPlayerName(source).." sagt: "..message, person, 255, 150, 0)			local posX, posY, posZ = getElementPosition( source )			local chatSphere = createColSphere( posX, posY, posZ, 10 )			local nearbyPlayers = getElementsWithinColShape( chatSphere, "player" )			destroyElement( chatSphere )							local x1, y1, z1 = getElementPosition ( source)							for index, nearbyPlayer in ipairs( nearbyPlayers ) do					if(nearbyPlayer ~= person) then						local x2, y2, z2 = getElementPosition ( nearbyPlayer )						local distance = getDistanceBetweenPoints3D ( x1,y1,z1,x2,y2,z2 )						local rgb = 15 * distance - 125						local rgb = math.abs ( rgb - 255 ) + 125						outputChatBox (name.. " sagt: " ..message, nearbyPlayer, rgb, rgb, rgb )					end					end						else			local posX, posY, posZ = getElementPosition( source )			local chatSphere = createColSphere( posX, posY, posZ, 10 )			local nearbyPlayers = getElementsWithinColShape( chatSphere, "player" )			destroyElement( chatSphere )							local x1, y1, z1 = getElementPosition ( source)								for index, nearbyPlayer in ipairs( nearbyPlayers ) do					local x2, y2, z2 = getElementPosition ( nearbyPlayer )					local distance = getDistanceBetweenPoints3D ( x1,y1,z1,x2,y2,z2 )					local rgb = 15 * distance - 125					local rgb = math.abs ( rgb - 255 ) + 125					outputChatBox (name.. " sagt: " ..message, nearbyPlayer, rgb, rgb, rgb )				end		end		outputServerLog("CHAT "..getPlayerName(source)..": "..message)						elseif messageType == 1 then		local posX, posY, posZ = getElementPosition( source )		local chatSphere = createColSphere( posX, posY, posZ, 20 )		local nearbyPlayers = getElementsWithinColShape( chatSphere, "player" )		destroyElement( chatSphere )		for index, nearbyPlayer in ipairs( nearbyPlayers ) do			local name = getPlayerName ( source )			outputChatBox ( name.." "..message, nearbyPlayer, 177, 177, 0 )		end				elseif messageType == 2 then			executeCommandHandler ( "t", source, message )			outputServerLog("TCHAT "..getPlayerName(source)..": "..message)	endendaddEventHandler( "onPlayerChat", getRootElement(),chat_func )function s_func ( player, cmd, ... )		if(getElementData(player, "inLogin") == true) then return end		local posX, posY, posZ = getElementPosition( player )		local chatSphere = createColSphere( posX, posY, posZ, 20 )		local nearbyPlayers = getElementsWithinColShape( chatSphere, "player" )		destroyElement( chatSphere )		local parametersTable = {...}		local stringWithAllParameters = table.concat( parametersTable, " " )		local pname = getPlayerName ( player )		for index, nearbyPlayer in ipairs( nearbyPlayers ) do			outputChatBox ( pname.." schreit: "..stringWithAllParameters.."!!!", nearbyPlayer, 255, 255, 255 )		endendaddCommandHandler ( "s", s_func )function l_func ( player, cmd, ... )		if(getElementData(player, "inLogin") == true) then return end		local posX, posY, posZ = getElementPosition( player )		local chatSphere = createColSphere( posX, posY, posZ, 3 )		local nearbyPlayers = getElementsWithinColShape( chatSphere, "player" )		destroyElement( chatSphere )		local parametersTable = {...}		local stringWithAllParameters = table.concat( parametersTable, " " )		local pname = getPlayerName ( player )		for index, nearbyPlayer in ipairs( nearbyPlayers ) do			outputChatBox ( pname.." fluestert: "..stringWithAllParameters.."...", nearbyPlayer, 150, 150, 150 )	endendaddCommandHandler ( "l", l_func )